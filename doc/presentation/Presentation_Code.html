<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>eR 2015 Workshop</title>

    <meta name="description" content="Slides for the October 2015 NeCTAR eResearch Workshop.">
    <meta name="author" content="Martin Paulo">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="revealjs/css/reveal.css">
    <link rel="stylesheet" href="revealjs/css/theme/solarized.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="revealjs/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'revealjs/css/print/pdf.css' : 'revealjs/css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="revealjs/lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
<!-- Slides go here -->
<style type="text/css">.reveal ol {list-style-type: upper-alpha;}</style>
<section data-markdown><script type="text/template">

## In the beginning

### The monolith

<a title="CATHERINE PRIOR [CC BY-SA 2.0 (http://creativecommons.org/licenses/by-sa/2.0)], via Wikimedia Commons" 
href="https://commons.wikimedia.org/wiki/File%3ASt_Breock_Down_Monolith_-_Standing_Stone_-_geograph.org.uk_-_109844.jpg">
<img height="406" width="640" alt="St Breock Down Monolith - Standing Stone - geograph.org.uk - 109844" src="images/St_Breock_Down_Monolith.jpg"/>
</a>

</script></section>
<section data-markdown><script type="text/template">

## Which decomposed

### Horizontally and vertically

<a title="By Bernard Gagnon (Own work) [GFDL (http://www.gnu.org/copyleft/fdl.html) or CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons" 
href="https://commons.wikimedia.org/wiki/File%3AStonehenge_02.jpg">
<img height="406" width="640" alt="Stonehenge 02" src="images/512px-Stonehenge_02.jpg"/></a>

</script></section>
<section data-markdown><script type="text/template">

## Then came the cloud

### Unconstrained supply

<a title="By Joydeep (Own work) [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons" 
href="https://commons.wikimedia.org/wiki/File%3ACumulus_cloud_before_rain.jpg">
<img height="406" width="640" alt="Cumulus cloud before rain" src="images/Cumulus_cloud_before_rain.jpg"/></a>

</script></section>
<section data-markdown><script type="text/template">

## There was a period of Instability

### While we learned

<a title="By Nevit Dilmen (Own work) [GFDL (http://www.gnu.org/copyleft/fdl.html) or CC-BY-SA-3.0 (http://creativecommons.org/licenses/by-sa/3.0/)], via Wikimedia Commons" 
href="https://commons.wikimedia.org/wiki/File%3AUnstable_walk.jpg">
<img  height="406" width="640" alt="Unstable walk" src="images/Unstable_walk.jpg"/></a>

</script></section>
<section data-markdown><script type="text/template">

## But convergence came

### With 'microservices'

<a href="https://commons.wikimedia.org/wiki/File:Cairn_at_Garvera,_Surselva,_Graubuenden,_Switzerland.jpg#/media/File:Cairn_at_Garvera,_Surselva,_Graubuenden,_Switzerland.jpg">
<img alt="Cairn at Garvera, Surselva, Graubuenden, Switzerland.jpg" src="images/Cairn.jpg"></a>

</script></section>
<section data-markdown><script type="text/template">

## A microservice

The entire team can be fed by two large Pizza's

</script></section>
<section data-markdown><script type="text/template">

## Microservice goodness

* Scaling
* Modularity
* Change the parts independently
* Allow mix of technologies
* Ease development (can add developers!)
* Fault tolerant

</script></section>
<section data-markdown><script type="text/template">

## Microservice badness

* Increased complexity
* More support
* Application speed
* Decentralized data
* Lock you into integration choices (refactoring)
* More points of failure

</script></section>
<section data-markdown><script type="text/template">

## A sample application!

### First App Application For OpenStack (faafo)

https://github.com/stackforge/faafo

A handy dandy fractal generator

</script></section>
<section data-markdown><script type="text/template">

## They even wrote a book!

### Writing your first OpenStack application

http://developer.openstack.org/firstapp-libcloud/

### PS: a work in progress...

</script></section>
<section data-markdown><script type="text/template">

## To explore it we need to run it...

So use your checklists to launch the VM!

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## All that was done your instance

```bash
sudo -i
apt-get update
apt-get upgrade
apt-get install python-pip
pip install apache-libcloud
apt-get install git
git clone https://github.com/MartinPaulo/faafo_infrastructure.git
```
</script></section>
<section data-markdown><script type="text/template">

## Set up your configs...

```bash
sudo -i
cp faafo.cfg.template faafo.cfg
nano faafo.cfg
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## Use your initials!

```python
[Names]
# chapter 1
all-in-one = mp_all_in_one
# chapter 2
app_controller_name = mp_ac
app_worker_name = mp_wn
# chapter 3
app-services = mp_as
app-api-1 = mp_aa1
app-api-2 = mp_aa2
worker-1 = mp_w1
worker-2 = mp_w2
worker-3 = mp_w3
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...


</script></section>
<section data-markdown><script type="text/template">

## Unleash the monolith!

```bash
python chapter1.py 
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## A walk through the launch code...

```bash
nano chapter1.py
```

</script></section>
<section data-markdown><script type="text/template">

## Let's play with faafo

Connect to the server....

```bash
ssh -i <key> ubuntu@<IP>
```

PS: From your local machine!

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## faafo cheat sheet...

```bash
faafo create
faafo create --height 9999 --width 9999 --tasks 5
faafo get --help
faafo list --help
faafo delete --help

for i in $(seq 1 5); do faafo create; done
```

</script></section>
<section data-markdown><script type="text/template">

# The magic!

### FAAFO architecture

![Faafo](images/Faafo.png)

</script></section>
<section data-markdown><script type="text/template">

# The Queue

![The aueue](images/Queue.png)

</script></section>
<section data-markdown><script type="text/template">

# And now...

A walk through faafo's code...

https://github.com/stackforge/faafo

</script></section>
<section data-markdown><script type="text/template">

# Scale it up one level

```bash
python teardown.py 
python chapter2.py 
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## A walk through the launch code...

```bash
nano chapter2.py
```

</script></section>
<section data-markdown><script type="text/template">

## Let's play with faafo

To see the difference.

From your local machine!

```bash
ssh -i <key> ubuntu@<IP>
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

# Much more faafo

```bash
python teardown.py 
python chapter3.py 
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## A walk through the launch code...

```bash
nano chapter3.py
```

</script></section>
<section data-markdown><script type="text/template">

## Let's play with faafo

To see the difference.

From your local machine!

```bash
ssh -i <key> ubuntu@<IP>
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## Tear it all down

```bash
python teardown.py
```

* <span style="color:red">&#9632;</style> = help me!
* <span style="color:green">&#9632;</style> = I'm ready to move on...

</script></section>
<section data-markdown><script type="text/template">

## A walk through the teardown code...

```bash
nano teardown.py
```

</script></section>
<section data-markdown><script type="text/template">

## The path to enlightenment

* Build the simplest thing that can work (a monolith)
* Make sure it's got well defined internal boundaries
  ([package by feature rather than by layer](http://www.javapractices.com/topic/TopicAction.do?Id=205))
* When confident you are on the right path, turn it into a neomonolith...
* The start to split out the microservices as you grow

</script></section>
    </div>

</div>

<script src="revealjs/lib/js/head.min.js"></script>
<script src="revealjs/js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'revealjs/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'revealjs/plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'revealjs/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'revealjs/plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'revealjs/plugin/zoom-js/zoom.js', async: true},
            {src: 'revealjs/plugin/notes/notes.js', async: true}
        ]
    });

</script>

</body>
</html>
